function init_dialog(parameters, no_resize){var name;var i;var form_name = document.getElementById('form_name');	if (!no_resize) window.sizeToContent(); if(!parameters) return false; for(i=0;i<form_name.length;i++){ name = form_name[i].name; if(name){ switch(form_name[i].type) { case 'text': case 'textarea': case 'select-one': if(parameters[name]){ if(name == 'width' || name == 'height'){ parameters[name] = String(parameters[name]).replace('px', ''); } eval("form_name."+name+".value = parameters[name];"); if(name == "rows" || name == "columns"){ eval("form_name."+name+".disabled=true;"); } } break; case 'checkbox': if(parameters[name]){ eval("var el = form_name."+name); el.checked = true; if(name == "background"){ window.is_init = true; document.getElementById(el.id+'_temp_image').src = parameters[name]; }else{ if(!(name == 'Play' || name == 'Loop' || name == 'Menu' || name == 'checked' || name == 'selected' || name == 'multiple' || name == 'noWrap' || name == 'borderCollapse')){ document.getElementById(el.id+'_table').setAttribute('bgColor', parameters[name]); } } } break; case 'radio': if(parameters[name]){ eval("document.all."+name+"_"+parameters[name]+".checked=true;"); } break; default: break; } } } return true; }function get_parameters(){var parameters;var radio_done;var i,j,k;var name;var form_name = document.getElementById('form_name'); parameters = new Array(); radio_done = new Array(); j=0; for(i=0;i<form_name.length;i++){ name = form_name[i].name; if(name){ switch(form_name[i].type){ case 'text': case 'textarea': case 'select-one': parameters[j] = name+"="+(eval("form_name."+name+".value")); j++; break; case 'checkbox': eval("var el = form_name."+name); parameters[j] = name+"="; is_checked = el.checked?el.checked:''; if(name == 'block_announce' || name == 'Play' || name == 'Loop' || name == 'Menu' || name == 'checked' || name == 'selected' || name == 'multiple' || name == 'noWrap' || name == 'borderCollapse'){ if ((name == 'checked' || name == 'selected' || name == 'multiple' || name == 'noWrap') && is_checked) { is_checked = name; } if (name == 'borderCollapse' && is_checked) is_checked = 'collapse'; parameters[j] += is_checked; }else{ if(is_checked){ if(name == "background"){ parameters[j] += document.getElementById(el.id+'_image').src; }else{ parameters[j] += document.getElementById(el.id+'_table').getAttribute('bgColor'); } } } j++; break; case 'radio': if(!radio_done[name]){ object = eval("form_name."+name); for(k=0;k<object.length;k++){ if(object[k].checked){ parameters[j] = name+"="+object[k].value; j++; break; } } radio_done[name] = true; } break; default: break; } } } return parameters;}function edit_object(object, params){var param;var i;var no_href = false;var no_name = false; if(!object || typeof(object) == "undefined") return; for(i=0;i<params.length;i++){ param = params[i].match(/([^=]*)=([\s|\S|\n]*)/); if(param[1] != 'rows' && param[1] != 'columns' || object.tagName == "TEXTAREA"){ if((object.tagName == "TABLE" || object.tagName == "IMG") && (param[1]=='width' || param[1]=='height' || param[1] == 'textAlign' || param[1] == 'borderCollapse')){ eval("object.style."+param[1]+" = param[2];"); }else{ if(param[2]){ if (object.tagName == "TEXTAREA" && param[1] == 'value') { object.value = param[2]; } else { if (param[1] == 'checked') { object.checked = param[2]; } else { object.setAttribute(param[1], param[2]); } } }else{ object.removeAttribute(param[1]); }/* if(param[1] == 'href' && !param[2]){ opener.do_action("Unlink"); return; }*/ if(param[1] == 'href' && !param[2]){ no_href = true; } if (no_href){ var link_html = object.innerHTML; object.parentNode.removeChild(object); opener.paste_html(link_html); return; } } } } if(object.tagName == 'TEXTAREA'){ object.removeAttribute('style'); }}function get_opener_object(){var parent = opener.active_rich;	if(!parent) return null;var sel = parent.getSelection();var r = sel.getRangeAt(0);var container = r.startContainer;var container_type = container.nodeType;var element;	if(container_type == 1){ element = container.childNodes[r.startOffset];	}else element = null;	return element;}function set_preview_table_image(object, url, w, h){var preview_size;var name; preview_size = 100; w = parseInt(w); h = parseInt(h); if(w > h){ object.width = preview_size; object.height = preview_size*h/w; }else{ object.height = preview_size; object.width = preview_size*w/h; } object.src = url; object.title = url; var id = String(object.id).replace(/_image$/, ''); document.getElementById(id).checked = true;}function set_color(e){var name;var obj;var color; if(e.target.name){ name = e.target.id;	eval('obj = document.getElementById("'+name+'_table")'); }else{ obj = get_previous_object(e.target, "TABLE"); name = obj.id;	name_parts = name.match(/^(.+)_([^_]+)$/);	name = name_parts[1]; } pick_color("dialog", name, obj.getAttribute('bgcolor'));}function set_image(e){var id;var old_src;var old_params;var params;var src;var width;var height;var param;var i;	id = e.target.id;	if (e.target.tagName == 'IMG') { id = id.replace(/_image$/, '');	}	var old_src = document.getElementById(id+'_image').getAttribute('src', 2);	old_params = new Array();	if (old_src.search("images/space.gif") < 0) { old_params['src'] = old_src;	}	old_params['name'] = id;	show_image_dialog(old_params, "dialog");}function get_page_properties(){var attrib = new Array();var meta;var meta_length;var i;var name;var abs_path;	if(!opener) return;	eval('abs_path = opener.'+opener.active_rich.name+'_rich_absolute_path;');	var active_rich = opener.active_rich;	var head = active_rich.document.getElementsByTagName('HEAD');	var nodes = head[0].childNodes;	var title;	var title_text = '';	for (i=0;i<nodes.length;i++) { if (nodes[i].tagName == 'TITLE') { title = nodes[i]; break; }	}	if (title) { title_text = title.innerHTML; var re = new RegExp('&amp;','gi'); RegExp.multiline = true; title_text = title_text.replace(re, '&');	}	attrib['title'] = title_text;	attrib['background'] = active_rich.document.body.background;	if(!abs_path) attrib['background'] = opener.del_base_url(attrib['background'], 1);	attrib['bgcolor'] = active_rich.document.body.getAttribute('bgcolor');	attrib['text'] = active_rich.document.body.text;	attrib['link'] = active_rich.document.body.link;	attrib['alink'] = active_rich.document.body.getAttribute('alink');	attrib['vlink'] = active_rich.document.body.getAttribute('vlink'); meta = active_rich.document.getElementsByTagName('META');	meta_length = meta.length;	for(i=0;i<meta_length;i++){ name = meta[i].name.toLowerCase(); if(name == 'keywords' || name == 'description'){ attrib[name] = meta[i].content; }	}	return attrib;}function get_previous_object(obj,tag_name) { if(obj){ if(obj.className == "re_editor") return null; if(obj.tagName != tag_name){ obj = get_previous_object(obj.parentNode, tag_name); } } return(obj);}function pick_color(name, action, color){var color_str = '';	if(!name) var name = active_rich.name; if (color) { if (color.indexOf('#') >= 0) color = "%23"+color.replace('#', ''); color_str = "&color="+color;	}	var w = 445;	var h = 140;	var win = window.open(rich_path+"pick_color_ns"+rich_dialog_ext+"?lang="+eval(name+"_lang")+'&action='+action+"&name="+name+color_str+"&110903b","dialog_color","modal=yes,width="+w+",height="+h+",left="+((screen.width-w)/2)+",top="+((screen.height-h)/2)+"\"");	win.focus();}function show_image_dialog(attrib, name){	return show_object_dialog('image', name, attrib);}function show_object_dialog(object, name, attrib){var w;var h;var param = '';	if(!object) return;	if(!name) var name = active_rich.name; if(attrib && attrib['name']) param = 'element_name='+attrib['name'];	switch(object){ case 'image': w = 415; h = 435; break; default: return;	}	var win = window.open(rich_path+"dialog_"+object+"_ns"+rich_dialog_ext+"?files_path="+eval(name+"_files_path")+"&files_url="+eval(name+"_files_url")+"&lang="+eval(name+"_lang")+"&name="+name+"&re_ext="+rich_dialog_ext+"&"+param+"&"+rich_sess_param+"&110903c","dialog_"+object+eval(name+"_lang"),"modal=yes,width="+w+",height="+h+",left="+((screen.width-w)/2)+",top="+((screen.height-h)/2)+"\"");	win.focus();}function set_dialog_color(name, color){var form_name = document.getElementById('form_name');	if(color){ eval("document.getElementById('"+name+"_table').setAttribute('bgcolor', '"+color+"');"); eval("form_name."+name+".checked = true;");	}	if (typeof(update_preview) == 'function') update_preview();}function re_upload(){var form_name = document.getElementById('form_name'); if(window.is_local_file){ window.is_local_file = false; document.getElementById('local_files').contentWindow.show_loading_div(); document.getElementById('local_files').contentDocument.getElementById('local_files_form').upload_only.value = 1; document.getElementById('local_files').contentDocument.getElementById('local_files_form').submit(); return; }}